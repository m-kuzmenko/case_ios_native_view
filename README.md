# Кейс: Старт анимаций в нативной ios view

# Описание контекста:

## Проект:

Пользователь выполняет задание и переходит на станицу с призом.

По кнопке "Получить подарок" переходим на страницу с подарком.

Поверх страниц нативный плагин рисует как падают снежинки.

## Задействованные технологии, инструменты и методологии

Flutter приложение с нативной ios view

## Ограничения

Нельзя отказаться от использования нативной ios view.

# Цели и ожидаемый результат + метрики, по которым будете измерять успех

Анимация должна запускаться при переходе на страницу с подарком. Требуется избавиться от задержек в методе _onIOSPlatformViewCreated. Требуется понять когда точно нативная view вмонтирована в дерево view и можно отправлять сообщения плагину о запуске анимации.

# Уже предпринятые шаги по достижению ожидаемого результата 

Попытался передать колбек onPlatformViewCreated. Но он не дал требуемого результата.


# Предположения или аспекты, которые важно учесть

По логам видно, что плагин создан и анимация запустилась.

Но она сразу же останавливается так как нативная view еще не вмонтирована в дерево view.

В методе _onIOSPlatformViewCreated пришлось добавить паузу, чтобы анимация заработала.

# Описание проблемы или вопроса, с чем необходима помощь

Требуется избавиться от задержек в методе _onIOSPlatformViewCreated. 

# Вопросы к эксперту

Для чего предназначен onPlatformViewCreated? Почему он не помог в моем случае?

# Доп. материалы

[Host native iOS views in your Flutter app with platform views](https://docs.flutter.dev/platform-integration/ios/platform-views)
